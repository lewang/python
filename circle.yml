machine:
  environment:
    _JAVA_OPTIONS: "-Xms512m -Xmx3072m"
    JAVA_OPTS: "-Xms512m -Xmx3072m -XX:+HeapDumpOnOutOfMemoryError"
    GRADLE_OPTS: '-Xmx512m -Dorg.gradle.jvmargs="-Xmx4608m -XX:+HeapDumpOnOutOfMemoryError"'
  java:
    version: oraclejdk8

general:
  artifacts:
    - "mobile/build/outputs"

dependencies:
  pre:
    - if [ ! -e $ANDROID_HOME/build-tools/25.0.2 ]; then echo y | android update sdk -u -a -t "tools"; fi
    - if [ ! -e $ANDROID_HOME/build-tools/25.0.2 ]; then echo y | android update sdk -u -a -t "build-tools-25.0.2"; fi
    - echo y | android update sdk --no-ui --all --filter "android-25,platform-tools,extra-google-google_play_services,extra-google-m2repository,extra-android-m2repository"
    - echo y | $ANDROID_HOME/tools/bin/sdkmanager --update
    - echo -e "file.encoding=UTF-8\nandroid.useDeprecatedNdk=true" > gradle.properties

  cache_directories:
    - "/usr/local/android-sdk-linux/tools"
    - "/usr/local/android-sdk-linux/build-tools/25.0.2"

  override:
    - echo dependencies

test:
  override:
    - echo test